(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1898],{5382:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var a,r=n(67294),c=n(83789),s=n(30266),i=n(809),o=n.n(i),d=n(46352),u=n.n(d),l=n(32177),m=n(92253),h=n(85893),_=function(){return(0,h.jsx)("div",{className:"card-header msg_head",children:(0,h.jsx)("div",{className:"d-flex bd-highlight",children:(0,h.jsxs)("div",{className:"user_info",children:[(0,h.jsx)("span",{children:"ADMIN"}),(0,h.jsx)("h5",{children:"#| Not Able To Upload Documents"})]})})})},f=function(e){var t=e.chat;return(0,h.jsx)(h.Fragment,{children:null===t||void 0===t?void 0:t.map((function(e,t){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"d-flex justify-content-start mb-4",children:(0,h.jsx)("div",{className:"msg_cotainer",children:(0,h.jsxs)("div",{className:"".concat(u().chatHead," "),children:[(0,h.jsx)("h6",{children:"Admin"}),(0,h.jsx)("p",{children:e.message},t)]})})})})}))})},v=function(e){var t=e.messageList;return(0,h.jsx)(h.Fragment,{children:t.map((function(e){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"d-flex justify-content-end mb-4",children:(0,h.jsx)("div",{className:"msg_cotainer_send msg_cotainer_send2",children:(0,h.jsxs)("div",{className:"".concat(u().ClientChatHead," "),children:[(0,h.jsx)("p",{children:e}),(0,h.jsx)("div",{className:u().receiveArea,children:(0,h.jsx)("img",{src:"/images/double-check_sel.svg"})})]})})})})}))})},p=function(){var e="https://inz-visa.herokuapp.com/inzVisa",t=(0,r.useState)([]),n=t[0],i=t[1],d=(0,r.useState)([]),p=d[0],x=d[1],j=(0,r.useState)([]),g=j[0],N=j[1],b=(0,r.useState)(),y=(b[0],b[1]),A=(0,r.useState)(),w=A[0],S=A[1],B=(0,r.useState)(),C=B[0],I=B[1],k=(0,r.useState)(""),F=(k[0],k[1]),Z=(0,r.useState)(""),E=(Z[0],Z[1]),D=(0,r.useState)(),H=(D[0],D[1]);(0,r.useEffect)((function(){G()}),[]);var G=function(){var e=(0,s.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.G_)(localStorage.reportId);case 2:200==(t=e.sent).code&&(y(t.result.ticketId),S(t.result._id),I(t.result.liaAgentId),E(t.result.status),H(t.result.createdBy));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){a=(0,l.io)(e)}),[e]),(0,r.useEffect)((function(){a.connected&&a.emit("join_room",{room_id:localStorage.reportId})}),[]),(0,r.useEffect)((function(){a.connected&&a.on("chat_message",(function(e){N([].concat((0,c.Z)(g),[e]))}))}),[]);var z=function(){var e=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.connected?(a.emit("send_message",{userId:C,date:new Date,send_from:localStorage.role,send_to:"admin",room_id:w,reportId:w,message:n,date_now:new Date}),n&&(x((function(e){return[].concat((0,c.Z)(e),[n])})),i(""))):F("waiting for connection");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,h.jsx)("div",{className:"row mt-5 mx-0",children:(0,h.jsx)("div",{className:"col-md-7 m-auto",children:(0,h.jsx)("div",{className:u().chatArea,children:(0,h.jsx)("div",{className:"chat",children:(0,h.jsxs)("div",{className:"card",children:[(0,h.jsx)(_,{}),(0,h.jsxs)("div",{id:"chatList",className:"card-body msg_card_body bodyHeight",children:[(0,h.jsx)(f,{chat:g}),(0,h.jsx)(v,{messageList:p})]}),(0,h.jsx)("form",{children:(0,h.jsx)("div",{className:"card-footer ",children:(0,h.jsxs)("div",{className:"".concat(u().FooterArea," pt-2"),children:[(0,h.jsx)("div",{className:"inputBoxChat",children:(0,h.jsx)("div",{className:"input-group",children:(0,h.jsx)("input",{type:"text",name:"sentMessage",className:"form-control type_msg",onChange:function(e){return i(e.target.value)},placeholder:"Type a message...",value:n})})}),(0,h.jsx)("div",{className:u().btnGroup}),(0,h.jsx)("div",{className:u().attachmentBtn,children:(0,h.jsx)("button",{type:"submit",onClick:z,children:(0,h.jsx)("img",{src:"/images/send.svg"})})})]})})})]})})})})})},x=function(){return(0,h.jsx)("div",{children:(0,h.jsx)(p,{})})}},96424:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Chat/Socket",function(){return n(5382)}])},46352:function(e){e.exports={chatArea:"chat_chatArea__2Ys8Z",chatHead:"chat_chatHead__1dU3l",viewFile:"chat_viewFile__2-b0K",viewFileBtn:"chat_viewFileBtn__3SH_u",ClientChatHead:"chat_ClientChatHead__2Q4m8",receiveArea:"chat_receiveArea__2SS6r",smallimgDiv:"chat_smallimgDiv__5y_GJ",smallAdmin:"chat_smallAdmin__3tF0G",tick:"chat_tick__dazJz",bottomBtnArea:"chat_bottomBtnArea__1iIFO",commentBtn:"chat_commentBtn__6J3W6",approveBtn:"chat_approveBtn__3C_Xp",FooterArea:"chat_FooterArea__-JiL4",avatarPreview:"chat_avatarPreview__CXzd-",removeBtn:"chat_removeBtn__2dn12",emojIconSec:"chat_emojIconSec__1Gc9C",smileBtn:"chat_smileBtn__qIPDR",btnGroup:"chat_btnGroup__cKfco",attachmentBtn:"chat_attachmentBtn__1gABL"}},56586:function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.d(t,{Z:function(){return a}})},83789:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var a=n(56586);var r=n(16988);function c(e){return function(e){if(Array.isArray(e))return(0,a.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,r.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},16988:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(56586);function r(e,t){if(e){if("string"===typeof e)return(0,a.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,a.Z)(e,t):void 0}}}},function(e){e.O(0,[9774,2888,179],(function(){return t=96424,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
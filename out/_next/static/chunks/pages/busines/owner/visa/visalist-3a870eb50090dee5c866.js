(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4582],{30168:function(e,t,n){"use strict";var r=n(92809),o=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.placeholder_name,n=e.type_name,r=e.class_name,a=e.readOnly,s=e.input_name,i=e.onChange,l=e.value,u=e.maxLength,d=e.onKeyPress,f=e.disabled,p=e.register;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("input",c({type:n,placeholder:t,onChange:i,value:l,name:s,maxLength:u,autoComplete:"off","aria-describedby":"emailHelp ",className:r||"",onKeyPress:d,disabled:f,readOnly:a},p))})}},97583:function(e,t,n){"use strict";var r=n(30266),o=n(809),a=n.n(o),c=(n(67294),n(83253)),s=n.n(c),i=n(96883),l=n.n(i),u=n(92253),d=n(11163),f=n(85893);t.Z=function(e){var t=e.open,n=((0,d.useRouter)(),function(){var e=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,(0,u.Vg)();case 3:200==e.sent.code&&(localStorage.clear(),window.location.href="/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return(0,f.jsx)("div",{children:(0,f.jsxs)(s(),{className:"".concat(l().customeModal," ").concat(l().customeAccountModal),isOpen:t,style:{overflowY:"scroll"},children:[(0,f.jsx)("div",{class:l().modalHeader,children:(0,f.jsx)("div",{class:"row",children:(0,f.jsx)("div",{class:"col-10"})})}),(0,f.jsx)("div",{className:l().genrateLink,children:(0,f.jsx)("div",{className:"".concat(l().genrateLinkSec," text-center"),children:(0,f.jsx)("form",{children:(0,f.jsxs)("div",{class:"row",children:[(0,f.jsx)("h3",{class:"col-13 text-center mb-2",children:"Thank you for registration. Administrator will approve your account then you can login to continue."}),(0,f.jsx)("div",{class:"col-12 text-center",children:(0,f.jsx)("button",{onClick:n,className:l().sendBtn,style:{float:"unset"},children:"OK"})})]})})})})]})})}},36666:function(e,t,n){"use strict";var r=n(30266),o=n(809),a=n.n(o),c=n(67294),s=n(83253),i=n.n(s),l=n(96883),u=n.n(l),d=n(92253),f=n(85893);t.Z=function(e){var t=e.isModalOpen,n=e.setIsModalOpen,o=(e.style,(0,c.useState)([])),s=o[0],l=o[1],p=(0,c.useState)(),h=p[0],v=p[1],m=(0,c.useState)(""),y=m[0],_=m[1],x=(0,c.useState)(!0),b=x[0],j=x[1],g=(0,c.useState)(""),w=g[0],S=g[1];(0,c.useEffect)((function(){N()}),[]);var N=function(){var e=(0,r.Z)(a().mark((function e(){var t,n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.OL)();case 2:200==(t=e.sent).code&&(r=null===(n=t.result)||void 0===n?void 0:n.countries,o=r.filter((function(e){return e.select})),l(o));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,r.Z)(a().mark((function e(t){var r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),h&&"select"!=h&&y&&b&&"select"!=b){e.next=5;break}S("Please fill all data "),e.next=11;break;case 5:return S(""),r={countryId:h,visaType:y,isActive:b},e.next=9,(0,d.I8)(r);case 9:200==(o=e.sent).code?(console.log(o,"response"),v(""),_(""),j(!0),n(!1),window.location.reload()):S("this visa type already exist ");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=null===s||void 0===s?void 0:s.map((function(e,t){var n,r;return(0,f.jsx)("option",{value:null===e||void 0===e||null===(n=e.countryId)||void 0===n?void 0:n._id,children:null===e||void 0===e||null===(r=e.countryId)||void 0===r?void 0:r.countryName},t)}));return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)("button",{onClick:function(){n(!0)},className:"".concat(u().SandBtn," mt-0 mb-0"),children:"Add Visa Type"}),(0,f.jsxs)(i(),{className:"".concat(u().customeModal," ").concat(u().customeMoneyModal,"  ").concat(u().customeAccountModal),isOpen:t,style:{overflowY:"scroll"},children:[(0,f.jsx)("div",{class:u().modalHeader,children:(0,f.jsxs)("div",{class:"row",children:[(0,f.jsxs)("div",{class:"col-10",children:[(0,f.jsx)("h4",{children:"Add Visa Type"}),(0,f.jsx)("span",{style:{color:"red",textAlign:"center"},children:w})]}),(0,f.jsxs)("div",{class:"col-2",children:[(0,f.jsx)("button",{style:{cursor:"pointer"},className:u().closeBtn,onClick:function(){n(!1)},children:(0,f.jsx)("img",{src:"/images/popupcross.svg"})}),(0,f.jsx)("br",{})]})]})}),(0,f.jsx)("div",{className:u().genrateLink,children:(0,f.jsx)("div",{className:u().genrateLinkSec,children:(0,f.jsxs)("form",{children:[(0,f.jsxs)("div",{className:"form-group px-0 ".concat(u().customeFormGroup),children:[(0,f.jsx)("h3",{children:"Visa For"}),(0,f.jsxs)("select",{class:"form-control",name:"country",size:"0",value:h,onChange:function(e){!function(e){v(e.target.value)}(e)},children:[(0,f.jsx)("option",{value:"select",children:"Select Country "}),k]})]}),(0,f.jsxs)("div",{className:"form-group px-0 ".concat(u().customeFormGroup),children:[(0,f.jsx)("h3",{children:"Visa Title"}),(0,f.jsx)("input",{type:"text",id:"title",name:"title",value:y,onChange:function(e){_(e.target.value)},placeholder:"Visa Type",className:"form-control ".concat(u().stepbarInput)})]}),(0,f.jsxs)("div",{className:"form-group px-0 ".concat(u().customeFormGroup),children:[(0,f.jsx)("h3",{children:"Status"}),(0,f.jsxs)("select",{class:"form-control",name:"maritalStatus",size:"0",value:b,onChange:function(e){j(e.target.value)},children:[(0,f.jsx)("option",{value:!0,children:" Active "}),(0,f.jsx)("option",{value:!1,children:"Deactive"})]})]}),(0,f.jsx)("div",{class:"row",children:(0,f.jsx)("div",{class:"col-12",children:(0,f.jsx)("button",{onClick:O,className:u().sendBtn,children:"Submit"})})})]})})})]})]})}},16837:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r=n(67294),o=n(83789);var a=n(16988);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],c=!0,s=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);c=!0);}catch(i){s=!0,o=i}finally{try{c||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||(0,a.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=n(92809),i=n(30266),l=n(809),u=n.n(l),d=n(30168),f=n(89665),p=n.n(f),h=n(11163),v=n(36666),m=n(92253),y=n(67018),_=n(97583),x=n(96486),b=n(85893);function j(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(){var e=(0,h.useRouter)(),t=(0,r.useState)(""),n=t[0],a=t[1],s=(0,r.useState)(""),l=s[0],f=s[1],g=(0,r.useState)(!1),w=g[0],N=g[1],O=(0,r.useState)(!1),k=O[0],q=O[1],C=(0,r.useState)([]),I=C[0],B=C[1],A=(0,r.useState)(""),D=(A[0],A[1]),T=(0,r.useState)(0),P=(T[0],T[1]),Z=(0,r.useState)(!1),E=Z[0],G=Z[1],L=(0,r.useState)(!1),V=L[0],M=L[1],W=(0,r.useState)(!1),F=W[0],R=W[1],X=(0,r.useState)(!1),U=X[0],z=X[1],H=(0,r.useState)({}),Y=H[0],J=H[1],K=(0,r.useState)(!1),Q=K[0],$=K[1],ee=(0,r.useRef)(!0);(0,r.useEffect)((function(){null!==ee&&void 0!==ee&&ee.current&&(te(),"liaAgent"==localStorage.role?G(!0):G(!1),ee.current=!1)}),[Q]);var te=function(){var e=(0,i.Z)(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R(!0),"businessOwner"!=localStorage.role){e.next=6;break}return e.next=4,(0,m.BE)();case 4:200==(t=e.sent).code?(R(!1),P(t.total),r=null===t||void 0===t||null===(n=t.result)||void 0===n?void 0:n.map((function(e,t){return S(S({},e),{},{isChecked:e.select})})),B(r),r.filter((function(e){return e.select})).length==r.length?N(!0):N(!1)):400==t.code&&(D(t.message),R(!1));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var t=(0,i.Z)(u().mark((function t(){var n,r,o,a,s,i,l,d,p,h,v,_,b,g;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object.entries(Y),r=(0,x.uniq)(n.map((function(e){return e[1]}))),o=[],a=function(e){var t,r=[],o=j(n);try{for(o.s();!(t=o.n()).done;){var a=c(t.value,2),s=a[0];e==a[1]&&r.push(s)}}catch(i){o.e(i)}finally{o.f()}return r},s=j(r);try{for(s.s();!(i=s.n()).done;)l=i.value,d=a(l),o.push({countryId:l,visaTypeId:d})}catch(u){s.e(u)}finally{s.f()}if(p=I.filter((function(e){return e.isChecked})).map((function(e){return{countryId:e.countryId._id,visaTypeId:e._id,select:e.isChecked}})).filter((function(e){if(e.visaTypeId.length>0)return e})),!((h=I.length>0&&(null===I||void 0===I?void 0:I.reduce((function(e,t){return t.isChecked&&e.push(t),e}),[]))).length>0)){t.next=26;break}if(z(!0),v=h.map((function(e){return e.countryId._id})),_=h.map((function(e){return e._id})),"businessOwner"!=localStorage.role){t.next=19;break}return t.next=15,(0,m.VO)(p);case 15:200==(b=t.sent).code&&"false"==localStorage.approved?(localStorage.setItem("visaType",JSON.stringify(_)),z(!1),M(!0)):200==b.code?(z(!1),e.push("/busines/owner/dashboard")):(f(b.message),z(!1)),t.next=24;break;case 19:if("liaAgent"!=localStorage.role){t.next=24;break}return t.next=22,(0,y.lV)(v,"","",_);case 22:200==(g=t.sent).code?(localStorage.setItem("visaType",JSON.stringify(_)),z(!1)):(z(!1),f(g.message));case 24:t.next=27;break;case 26:f("Please select visa type");case 27:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),re=null===I||void 0===I?void 0:I.filter((function(e){var t;return""==n||null!==e&&void 0!==e&&null!==(t=e.visaType)&&void 0!==t&&t.toLowerCase().includes(n.toLowerCase())?e:void 0})).map((function(e,t){var n;return(0,b.jsx)("div",{className:"form-group ".concat(p().fromGroup),children:(0,b.jsxs)("div",{className:p().selectinputBox,children:[(0,b.jsx)("input",{id:e._id,name:"checkbox",type:"checkbox",checked:!0===e.isChecked?e._id:"",onChange:function(t){!function(e,t){var n=t._id,r=t.countryId;n in Y?delete Y[n]:Y[n]=r._id;for(var a=I,c=0;c<I.length;c++)I[c]._id===e?(I[c].isChecked=!I[c].isChecked,I[c].select=!I[c].isChecked):(I[c].isChecked=I[c].isChecked,I[c].select=!I[c].isChecked,f(""));B((0,o.Z)(a)),a.filter((function(e){return e.isChecked})).length==I.length?N(!0):N(!1),J(Y),$(!Q)}(e._id,e)}}),(0,b.jsx)("label",{for:e._id,className:p().checkboxLabel,children:"".concat(e.visaType," ( ").concat(null===(n=e.countryId)||void 0===n?void 0:n.countryName,")")})]})},e._id)}));return(0,b.jsx)(r.Fragment,{children:(0,b.jsxs)("div",{className:p().contentWrapper,children:[(0,b.jsx)(_.Z,{open:V}),(0,b.jsx)("div",{className:"container-fuild",children:(0,b.jsx)("div",{className:"row",children:(0,b.jsxs)("div",{className:"col-md-9 m-auto",children:[(0,b.jsx)("h3",{className:"",children:"VISA Types I\u2019m Working for "}),(0,b.jsxs)("div",{className:p().visaStatus,children:[(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("span",{style:{color:"red"},children:l}),E?"":(0,b.jsx)("div",{className:"col-md-7 pr-0 mt-0 mb-3 mx-auto ".concat(p().buttonGroup),children:(0,b.jsx)(v.Z,{styles:p(),closeModal:function(){q(!1)},open:k,openModal:function(e){q(!0)},setIsResponse:z,all_visa_list:te,visaList:I})})]}),(0,b.jsx)("div",{className:"row mt-3",children:(0,b.jsx)("div",{className:"col-md-7 m-auto",children:(0,b.jsx)("div",{className:p().searchSection,children:(0,b.jsxs)("form",{children:[(0,b.jsx)("div",{className:"input-group",children:(0,b.jsx)(d.Z,{type_name:"",placeholder_name:"Search by Visa Type",inputId:"",input_name:"",value:n,onChange:function(e){e.preventDefault(),a(e.target.value)},class_name:"form-control"})}),(0,b.jsx)("span",{className:"mt-4 d-block",children:(0,b.jsx)("span",{style:{color:"red"},children:" "})})]})})})}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-md-7 m-auto",children:(0,b.jsxs)("div",{className:p().visaStatusDiv,children:[re.length>0&&0==n.length?(0,b.jsx)("div",{className:"form-group ".concat(p().fromGroup),children:(0,b.jsxs)("div",{className:p().selectinputBox,children:[(0,b.jsx)("input",{id:"checkbox",checked:w,name:"allselect",type:"checkbox",onChange:function(e){return function(e,t){var n=e.target,r=n.name;n.checked,"allselect"==r&&(B((function(e){return(0,o.Z)(e.map((function(e){return S(S({},e),{},{isChecked:!w})})))})),N(!w)),I.map((function(e,t){var n=e._id,r=e.countryId;n in Y&&w?delete Y[n]:Y[n]=null===r||void 0===r?void 0:r._id,J(Y)}))}(e)}}),(0,b.jsx)("label",{for:"checkbox",className:p().checkboxLabel,children:"Select All Visa Type"})]})}):"",F?(0,b.jsx)("p",{children:"Loading..."}):re.length>0?re:(0,b.jsx)("p",{className:p().Nodata,children:" No data found"})]})}),(0,b.jsx)("div",{className:"col-md-12 mt-5",children:re.length>0?(0,b.jsx)("div",{className:"row",children:(0,b.jsx)("div",{className:"col-md-7 m-auto text-right ".concat(p().buttonGroup),children:U?(0,b.jsx)("button",{disabled:!0,children:" Loading... "}):(0,b.jsx)("button",{onClick:ne,children:" Update "})})}):""})]})]})]})})})]})})},O=function(){var e=(0,r.useState)(!1),t=(e[0],e[1]),n=(0,r.useState)(!1),o=(n[0],n[1]);return(0,r.useEffect)((function(){"businessOwner"==localStorage.role?t(!0):"liaAgent"==localStorage.role&&"true"==localStorage.approved&&o(!0)})),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(N,{})})}},84350:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/busines/owner/visa/visalist",function(){return n(16837)}])},89665:function(e){e.exports={DashboardpageWrap:"query_DashboardpageWrap__OOAVE",pageWrap:"query_pageWrap__26-zG",contentWrapper:"query_contentWrapper__3_zIA",tableArea:"query_tableArea__33VWn",Btn1:"query_Btn1__3QUMI",Btn2:"query_Btn2__3UBgh",Btn3:"query_Btn3__1Gx_t",Btn4:"query_Btn4__LfX1e",Btn5:"query_Btn5__31xXH",BtnWithoutImg:"query_BtnWithoutImg__3VpwM",Nodata:"query_Nodata__28Uxq",searchSection:"query_searchSection__1VC3M",BtnGroup:"query_BtnGroup__2maZ5",btnBox:"query_btnBox__PE6HP",dropDown:"query_dropDown__2x5N6",dropDownBtn:"query_dropDownBtn__1YcwJ",Arrow:"query_Arrow__B77Qw",dropDown1:"query_dropDown1__3oVq_",clientStatus:"query_clientStatus__3Ylo0",NavTabs:"query_NavTabs__1cCPe",active:"query_active__3v4-C",TabContent:"query_TabContent__nWqsm",buttonGroup:"query_buttonGroup__1cRR_",downloadBtn:"query_downloadBtn__q4G8a",noDataSection:"query_noDataSection__169rq",staffImage:"query_staffImage__i8tfD",visaStatus:"query_visaStatus__4Yyz1",visaStatusDiv:"query_visaStatusDiv__1X1fX",fromGroup:"query_fromGroup__3cXT7",selectinputBox:"query_selectinputBox__3-l50",checkboxLabel:"query_checkboxLabel__yMdVn",submitBtn:"query_submitBtn__1R00a",templateBtnGroup:"query_templateBtnGroup__1gfcf"}},56586:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},83789:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(56586);var o=n(16988);function a(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},16988:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(56586);function o(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},function(e){e.O(0,[3662,9774,2888,179],(function(){return t=84350,e(e.s=t);var t}));var t=e.O();_N_E=t}]);